(()=>{"use strict";function e(){const e=document.querySelectorAll(".goods .card"),t=document.querySelector("#discount-checkbox"),c=document.querySelector("#min"),n=document.querySelector("#max"),o=document.querySelector(".catalog-list li.active");e.forEach((e=>{const r=e.querySelector(".card-price"),a=parseFloat(r.textContent),l=e.querySelector(".card-sale");e.parentNode.style.display="",(c.value&&a<c.value||n.value&&a>n.value||t.checked&&!l||o&&e.dataset.category!==o.textContent)&&(e.parentNode.style.display="none")}))}(function(){const e=document.querySelector(".goods");return fetch("../db/db.json").then((e=>{if(e.ok)return e.json();throw new Error("Es gibt einige Fehler: "+e.status)})).then((e=>e)).catch((t=>{console.warn(t),e.innerHTML='<div style="color:red; font-size:2rem" >Etwas ist schief gelaufen</div>'}))})().then((t=>{!function(e){const t=document.querySelector(".goods");e.goods.forEach((e=>{const c=document.createElement("div");c.className="col-12 col-md-6 col-lg-4 col-xl-3",c.innerHTML=`\n\t\t\t\t<div class="card" data-category="${e.category}">\n                    ${e.sale?'<div class="card-sale">ðŸ”¥Hot SaleðŸ”¥</div>':""}\n\t\t\t\t\t<div class="card-img-wrapper">\n\t\t\t\t\t\t<span class="card-img-top"\n\t\t\t\t\t\t\tstyle="background-image: url(${e.img})"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="card-body justify-content-between">\n\t\t\t\t\t\t<div class="card-price">${e.price} â‚¬</div>\n\t\t\t\t\t\t<h5 class="card-title">${e.title}</h5>\n\t\t\t\t\t\t<button class="btn btn-primary">In den Warenkorb</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n        `,t.append(c)}))}(t),function(){const t=document.querySelectorAll(".goods .card"),c=document.querySelector(".catalog-list"),n=document.querySelector(".catalog-button"),o=document.querySelector(".catalog"),r=document.querySelector(".filter-title h5"),a=new Set;t.forEach((e=>{a.add(e.dataset.category)})),a.forEach((e=>{const t=document.createElement("li");t.textContent=e,c.append(t)}));const l=c.querySelectorAll("li");n.addEventListener("click",(c=>{o.style.display?o.style.display="":o.style.display="block","LI"===c.target.tagName&&(t.forEach((e=>{e.dataset.category===c.target.textContent?e.parentNode.style.display="":e.parentNode.style.display="none"})),l.forEach((e=>{e===c.target?e.classList.add("active"):e.classList.remove("active")})),r.textContent=c.target.textContent,r.classList.add("filtertitle"),e())}))}(),document.querySelectorAll("#discount-checkbox").forEach((e=>{e.addEventListener("change",(function(){this.checked?this.nextElementSibling.classList.add("checked"):this.nextElementSibling.classList.remove("checked")}))})),function(){const e=document.querySelector(".cart"),t=document.querySelector("#cart"),c=document.querySelector(".cart-close");t.addEventListener("click",(()=>{e.style.display="flex",c.addEventListener("click",(()=>{e.style.display="none"}))}))}(),function(){const e=document.querySelectorAll(".goods .card"),t=document.querySelector(".cart-wrapper"),c=document.querySelector("#cart-empty"),n=document.querySelector(".counter");function o(){const e=t.querySelectorAll(".card"),o=t.querySelectorAll(".card-price"),r=document.querySelector(".cart-total span");let a=0;n.textContent=e.length,o.forEach((e=>{let t=parseFloat(e.textContent);a+=t})),r.textContent=a,0!==e.length?c.innerHTML="":c.innerHTML="Ihr Warenkorb ist leer"}e.forEach((e=>{e.querySelector(".btn").addEventListener("click",(()=>{const c=e.cloneNode(!0);t.append(c),o();const n=c.querySelector(".btn");n.textContent="Aus dem Warenkorb entfernen",n.addEventListener("click",(()=>{c.remove(),o()}))}))}))}(),function(){const t=document.querySelectorAll(".goods .card"),c=document.querySelector("#discount-checkbox"),n=document.querySelector("#min"),o=document.querySelector("#max"),r=document.querySelector(".search-wrapper_input"),a=document.querySelector(".search-btn");document.querySelector(".logo").addEventListener("click",(()=>{t.forEach((e=>{e.parentNode.style.display=""}))})),a.addEventListener("click",(()=>{const e=new RegExp(r.value.trim(),"i");t.forEach((t=>{const c=t.querySelector(".card-title");e.test(c.textContent)?t.parentNode.style.display="":t.parentNode.style.display="none"})),r.value=""})),c.addEventListener("click",e),n.addEventListener("change",e),o.addEventListener("change",e)}()}))})();